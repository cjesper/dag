<html>
    <header>
      <title> Det är...</title>
	<meta charset="UTF-8" />
      <link href="index.css" rel="stylesheet" />
    </header>
  <body id="body">
      <img class="head" id="normal" src="src/head.png" />
      <img class="head" id="glow" src="src/head_glow.png" />
      <img id="prippan" src="src/prippan.png" />
      <div id="bild">
        <img class="image" src="./src/fredag.png">    
      </div>
      <div id="no_friday_div">
          <h1 id="nofriday" >Det är dessvärre inte fredag, vänner :( </h1>
          <h1 id="is_friday_in" >Som tur är infaller nästa fredag redan om </h1>
          <h1 id ="friday_time"></h1>
      </div>
      <img onclick="add_strobe()" id="lob_bild" src="src/lob.JPG" />
      <h3 onclick="add_strobe()" id="lob_text">Press this to party instantly</h3>
      <h3 id="counter">1</h3>
      <script>

        var date = new Date();
        var day = date.getDay();

        function hide_friday () {
            var prippan = document.getElementById("prippan");
            var head = document.getElementById("bild");
            var glow = document.getElementById("glow");
            prippan.style.display = "none";
            head.style.display = "none";
            glow.style.display = "none";
        } 

        function setDay() {
            var friday_time = 0
            var dayInWeek = 5;

            var today = new Date();
            var nextDayDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + dayInWeek - (today.getDay() >= dayInWeek ? today.getDay() - 7 : today.getDay()));
            var friday_time = (nextDayDate.getTime() / 1000);
            var current_time = (today.getTime() / 1000);

            var seconds = (friday_time - current_time);

            var days = Math.floor(seconds / (3600*24));
            seconds  -= days*3600*24;
            var hrs   = Math.floor(seconds / 3600);
            seconds  -= hrs*3600;
            var mnts = Math.floor(seconds / 60);
            seconds  -= (mnts*60);
            var date_string = (days+" dagar, "+hrs+" timmar, "+mnts+" minuter, "+Math.floor(seconds)+" sekunder"); 
            var friday_time = document.getElementById("friday_time").innerHTML = date_string;
        }
        setDay();

        setInterval(() => setDay()
        , 1000)

        var audio = new Audio('src/scooter.mp3');
        var counter = 0;
        var counter_element = document.getElementById('counter');
        counter_element.innerHTML = counter;
        counter_element.style.display = "none"; 
        var toggle_strobe = true;

        if (day != 5) {
            hide_friday();
        } else {
        document.getElementById('normal').style.display="block";
        document.getElementById('no_friday_div').style.display="none";
        setTimeout(() => {
          document.getElementById('glow').style.display = "block";
          var prippan = document.getElementById("prippan");
          prippan.style.display = "block";
          prippan.classList.add("prippan-animate");

          setTimeout(() => {
            prippan.classList.add("prippan-drink");
            var lob_bild = document.getElementById("lob_bild");
            var lob_text= document.getElementById("lob_text");
            lob_bild.style.display = "block";
            lob_text.style.display = "block";
            counter++;
            counter_element.innerHTML = counter;
            counter_element.style.display = "block"; 
            setInterval(() => {
                counter++;
                counter_element.innerHTML = counter;
            }, 5000);
          }, 10000);

        }, 10500);
        }

          function add_strobe () {
            console.log("AFF");
            var prippan = document.getElementById("prippan");
            if (toggle_strobe === true) {
              var body = document.getElementById("body").classList.add("body-strobe")
              audio.play();
              prippan.src="src/jelzin.jpg";
              toggle_strobe = false;
            } else {
              var body = document.getElementById("body").classList.remove("body-strobe")
              audio.pause();
              prippan.src="src/prippan.png";
              toggle_strobe = true;
            }
          } 
      </script>
  </body>
</html>
